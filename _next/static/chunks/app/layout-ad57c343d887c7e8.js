(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7130:function(e,t,n){Promise.resolve().then(n.t.bind(n,8877,23)),Promise.resolve().then(n.bind(n,3144)),Promise.resolve().then(n.bind(n,4258)),Promise.resolve().then(n.t.bind(n,936,23))},3144:function(e,t,n){"use strict";n.d(t,{Header:function(){return d}});var r=n(7437),a=n(2265),o=n(1169),i=n(5450);function l(){let{loading:e,online:t,callsign:n,noCid:o,error:l}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,[t,n]=(0,a.useState)({loading:!0,online:!1,error:null});return(0,a.useEffect)(()=>{let t;let r=async()=>{var e,t,r;let a=null===(e=(0,i.ri)().vatsimCid)||void 0===e?void 0:e.trim();if(!a){n({loading:!1,online:!1,noCid:!0,error:null});return}n(e=>({...e,loading:!0,noCid:!1,error:null}));try{let e=await fetch("/api/vatsim/online?cid=".concat(encodeURIComponent(a)),{cache:"no-store"});if(!e.ok)throw Error("Proxy HTTP ".concat(e.status));let r=await e.json();if(null==r?void 0:r.ok){n({loading:!1,online:!!r.online,callsign:null==r?void 0:null===(t=r.pilot)||void 0===t?void 0:t.callsign,noCid:!1,error:null});return}throw Error((null==r?void 0:r.error)||"Proxy returned !ok")}catch(e){try{let e=await fetch("https://data.vatsim.net/v3/vatsim-data.json",{cache:"no-store",redirect:"follow"});if(!e.ok)throw Error("Feed HTTP ".concat(e.status));let t=await e.json(),o=null==t?void 0:null===(r=t.pilots)||void 0===r?void 0:r.find(e=>String(null==e?void 0:e.cid)===a);n({loading:!1,online:!!o,callsign:null==o?void 0:o.callsign,noCid:!1,error:null})}catch(t){n({loading:!1,online:!1,callsign:void 0,noCid:!1,error:(null==t?void 0:t.message)||(null==e?void 0:e.message)||"Unknown error"})}}};return r(),t=window.setInterval(r,e),()=>{void 0!==t&&window.clearInterval(t)}},[e]),t}(15e3);return(0,r.jsxs)("span",{className:"".concat("inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium transition-colors ring-1"," ").concat(t?"bg-green-100 text-green-700 ring-green-300/60 dark:bg-green-500/20 dark:text-green-300 dark:ring-green-400/30":"bg-red-100 text-red-700 ring-red-300/60 dark:bg-red-500/20 dark:text-red-300 dark:ring-red-400/30"),title:o?"No VATSIM CID saved in Settings":l?"Last error: ".concat(l):t?"Pilot online on VATSIM":"Not online on VATSIM","aria-live":"polite","aria-busy":e?"true":"false",children:[(0,r.jsx)("span",{className:"h-2 w-2 rounded-full "+(t?"bg-green-500 dark:bg-green-400":"bg-red-500 dark:bg-red-400"),"aria-hidden":!0}),o?"No CID Set":t?"VATSIM Online".concat(n?" • ".concat(n):""):e?"VATSIM Offline (checking…)":"VATSIM Offline"]})}function s(){let[e,t]=(0,a.useState)("checking");return(0,a.useEffect)(()=>{let e=(0,i.ri)(),n=async()=>{try{let n=await fetch("/api/psx/ping?host=".concat(encodeURIComponent(e.psxHost||"127.0.0.1"),"&port=").concat(encodeURIComponent(String(e.psxPort||10747))),{cache:"no-store"}),r=await n.json();t((null==r?void 0:r.ok)?"up":"down")}catch(e){t("down")}};n();let r=setInterval(n,15e3);return()=>clearInterval(r)},[]),(0,r.jsxs)("span",{className:"".concat("inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium transition-colors ring-1"," ").concat("up"===e?"bg-green-100 text-green-700 ring-green-300/60 dark:bg-green-500/20 dark:text-green-300 dark:ring-green-400/30":"checking"===e?"bg-yellow-100 text-yellow-700 ring-yellow-300/60 dark:bg-yellow-500/20 dark:text-yellow-300 dark:ring-yellow-400/30":"bg-red-100 text-red-700 ring-red-300/60 dark:bg-red-500/20 dark:text-red-300 dark:ring-red-400/30"),title:"PSX ".concat(e),children:[(0,r.jsx)("span",{className:"h-2 w-2 rounded-full "+("up"===e?"bg-green-500 dark:bg-green-400":"checking"===e?"bg-yellow-500 dark:bg-yellow-400":"bg-red-500 dark:bg-red-400"),"aria-hidden":!0}),"up"===e?"PSX Online":"checking"===e?"Checking...":"PSX Offline"]})}function d(){let e=(0,o.useRouter)(),t=(0,o.usePathname)(),[n,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),m="/settings"===t;return(0,a.useEffect)(()=>{let e=()=>{try{let e=(0,i.ri)();d(!!e.psxEnabled)}catch(e){}};e(),window.addEventListener(i.wj,e),window.addEventListener("storage",e);let t=window.location.protocol,n=window.location.hostname;return"https:"!==t&&"localhost"!==n&&"127.0.0.1"!==n&&u("For Twitch chat, use https://".concat(n,".nip.io:3000 (HTTPS required for non-localhost).")),()=>{window.removeEventListener(i.wj,e),window.removeEventListener("storage",e)}},[]),(0,r.jsxs)("header",{className:" fixed top-0 left-0 right-0 z-40 flex flex-col gap-2 px-5 md:px-8 py-3 bg-white dark:bg-black/70 border-b border-neutral-200 dark:border-neutral-800 text-black dark:text-white ",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsx)("h1",{className:"text-base md:text-lg font-semibold tracking-wide",children:"Team Covey EFB - V0.1"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l,{}),n&&(0,r.jsx)(s,{}),(0,r.jsx)("button",{onClick:()=>{e.push(m?"/":"/settings")},"aria-label":m?"Close settings":"Open settings",className:"inline-flex h-10 w-10 items-center justify-center gap-1 rounded-md border border-neutral-300/70 dark:border-neutral-700/70 bg-white/80 dark:bg-neutral-900/80 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:(0,r.jsx)("span",{className:"inline-flex flex-col items-center justify-center gap-1","aria-hidden":!0,children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"block h-0.5 w-5 rotate-45 origin-center bg-neutral-900 dark:bg-neutral-100"}),(0,r.jsx)("span",{className:"block h-0.5 w-5 -rotate-45 origin-center bg-neutral-900 dark:bg-neutral-100"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"block h-0.5 w-5 rounded bg-neutral-900 dark:bg-neutral-100"}),(0,r.jsx)("span",{className:"block h-0.5 w-5 rounded bg-neutral-900 dark:bg-neutral-100"}),(0,r.jsx)("span",{className:"block h-0.5 w-5 rounded bg-neutral-900 dark:bg-neutral-100"})]})})})]})]}),c&&(0,r.jsx)("div",{className:"mt-2 w-full text-[11px] md:text-xs text-yellow-900 dark:text-amber-200 bg-amber-100/90 dark:bg-amber-900/40 border border-amber-300/70 dark:border-amber-800/70 rounded-md px-3 py-2",children:c})]})}},4258:function(e,t,n){"use strict";n.d(t,{ThemeProvider:function(){return o}});var r=n(7437),a=n(9512);function o(e){let{children:t}=e;return(0,r.jsx)(a.f,{attribute:"class",defaultTheme:"dark",forcedTheme:"dark",enableSystem:!1,children:t})}},5450:function(e,t,n){"use strict";n.d(t,{Kp:function(){return u},Vg:function(){return c},lo:function(){return d},ri:function(){return i},t3:function(){return m},wj:function(){return l}});let r="dispatch.settings.v1",a="covey_vatsim_cid",o="covey_simbrief_username";function i(){var e,t,n;let i=null!==(n=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}(localStorage.getItem(r)))&&void 0!==n?n:{},l=null===(e=localStorage.getItem(a))||void 0===e?void 0:e.trim();!i.vatsimCid&&l&&(i.vatsimCid=l,localStorage.setItem(r,JSON.stringify(i)));let s=null===(t=localStorage.getItem(o))||void 0===t?void 0:t.trim();return!i.simbriefUsername&&s&&(i.simbriefUsername=s,localStorage.setItem(r,JSON.stringify(i))),i}let l="settings:updated";function s(e){var t,n;let s={...i(),...e};if(localStorage.setItem(r,JSON.stringify(s)),window.dispatchEvent(new Event(l)),"vatsimCid"in e){let n=null===(t=e.vatsimCid)||void 0===t?void 0:t.trim();n?localStorage.setItem(a,n):localStorage.removeItem(a)}if("simbriefUsername"in e){let t=null===(n=e.simbriefUsername)||void 0===n?void 0:n.trim();t&&localStorage.setItem(o,t)}}let d=e=>s({vatsimCid:(null==e?void 0:e.trim())||void 0}),c=e=>s({simbriefUsername:(null==e?void 0:e.trim())||void 0}),u=e=>s({hoppieLogon:(null==e?void 0:e.trim())||void 0}),m=e=>s({psxEnabled:!!e})},8877:function(){},936:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}},9512:function(e,t,n){"use strict";n.d(t,{F:function(){return c},f:function(){return u}});var r=n(2265),a=(e,t,n,r,a,o,i,l)=>{let s=document.documentElement,d=["light","dark"];function c(t){(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&o?a.map(e=>o[e]||e):a;n?(s.classList.remove(...r),s.classList.add(o&&o[t]?o[t]:t)):s.setAttribute(e,t)}),l&&d.includes(t)&&(s.style.colorScheme=t)}if(r)c(r);else try{let e=localStorage.getItem(t)||n,r=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(r)}catch(e){}},o=["light","dark"],i="(prefers-color-scheme: dark)",l="undefined"==typeof window,s=r.createContext(void 0),d={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=r.useContext(s))?e:d},u=e=>r.useContext(s)?r.createElement(r.Fragment,null,e.children):r.createElement(g,{...e}),m=["light","dark"],g=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:a=!0,enableColorScheme:l=!0,storageKey:d="theme",themes:c=m,defaultTheme:u=a?"system":"light",attribute:g="data-theme",value:p,children:w,nonce:k,scriptProps:x}=e,[y,S]=r.useState(()=>h(d,u)),[C,E]=r.useState(()=>"system"===y?v():y),j=p?Object.values(p):c,T=r.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=v());let r=p?p[t]:t,i=n?b(k):null,s=document.documentElement,d=e=>{"class"===e?(s.classList.remove(...j),r&&s.classList.add(r)):e.startsWith("data-")&&(r?s.setAttribute(e,r):s.removeAttribute(e))};if(Array.isArray(g)?g.forEach(d):d(g),l){let e=o.includes(u)?u:null,n=o.includes(t)?t:e;s.style.colorScheme=n}null==i||i()},[k]),I=r.useCallback(e=>{let t="function"==typeof e?e(y):e;S(t);try{localStorage.setItem(d,t)}catch(e){}},[y]),N=r.useCallback(e=>{E(v(e)),"system"===y&&a&&!t&&T("system")},[y,t]);r.useEffect(()=>{let e=window.matchMedia(i);return e.addListener(N),N(e),()=>e.removeListener(N)},[N]),r.useEffect(()=>{let e=e=>{e.key===d&&(e.newValue?S(e.newValue):I(u))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[I]),r.useEffect(()=>{T(null!=t?t:y)},[t,y]);let _=r.useMemo(()=>({theme:y,setTheme:I,forcedTheme:t,resolvedTheme:"system"===y?C:y,themes:a?[...c,"system"]:c,systemTheme:a?C:void 0}),[y,I,t,C,a,c]);return r.createElement(s.Provider,{value:_},r.createElement(f,{forcedTheme:t,storageKey:d,attribute:g,enableSystem:a,enableColorScheme:l,defaultTheme:u,value:p,themes:c,nonce:k,scriptProps:x}),w)},f=r.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:o,enableSystem:i,enableColorScheme:l,defaultTheme:s,value:d,themes:c,nonce:u,scriptProps:m}=e,g=JSON.stringify([o,n,s,t,c,d,i,l]).slice(1,-1);return r.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?u:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(g,")")}})}),h=(e,t)=>{let n;if(!l){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},b=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},v=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light")}},function(e){e.O(0,[232,971,23,744],function(){return e(e.s=7130)}),_N_E=e.O()}]);